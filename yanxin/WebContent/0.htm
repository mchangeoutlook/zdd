<html>
	<head>
		<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/>
		<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
		<meta name="mobileoptimized" content="0"/>
		<link rel="shortcut icon" href="logo.png" type="image/x-icon" />
		<title>言心 你的心灵日记 陪伴有故事的你</title>
		<meta name="description" content="言心 你的心灵日记 陪伴有故事的你" />
  		<meta name="Keywords" content="言心 你的心灵日记 陪伴有故事的你" />
  		<style type="text/css">
  			input[type="button"]{
  				background:#008B8B;border: none;color:#ccc;border-radius:4px 4px;font-size:14px;line-height:25px;height:25px;
  			}
  			input[type="text"]{
  				background:#eee;border: none;padding:4px;border-radius:4px 4px;font-size:14px;line-height:25px;height:25px;
  			}
  			textarea{
  				background:#eee;border: none;padding:4px;border-radius:4px 4px;font-size:14px;line-height:25px;
  			}
  			input[type="password"]{
  				background:#eee;border: none;padding:4px;border-radius:4px 4px;font-size:14px;line-height:25px;height:25px;
  			}
  			body{
  				position:fixed;
  				top:0px;
  				left:0px;
  				right:0px;
  				bottom:0px;
  				overflow:hidden;
  				font-size:14px;
  				color:#ccc;
  				text-align:center;
  				background:#000;
  				margin:0px;
  			}
  			
  			.content{
  				position:fixed;
  				display:block;
  				text-align:center;
  				overflow:hidden;
  				top:0px;
  				left:0px;
  				right:0px;
  				bottom:80px;
  				border:0px;
  			}
  			
  			.footbtns{
  				position:fixed;
  				display:block;
  				text-align:center;
  				bottom:52px;
  				height:25px;
  				line-height:25px;
  				width:100%;
				border:0px;
  			}

			.load{
				animation: loading 0.4s ease 0s alternate infinite;
			}  			
			@keyframes loading
			{
				0%{opacity:1;}
				20%{opacity:1;}
				100%{opacity:0.2;}
			}
  			
  			.msgfoot{
  				position:fixed;
  				text-align:center;
  				word-wrap:break-word;
  				bottom:-48px;
				width:80%;
				padding-left:5%;
				padding-right:5%;
				height:48px;
				font-size:14px;
				line-height:16px;
  				border:0px;
  				overflow-x:hidden;
  				overflow-y:auto;
  				color:#f4a57e;
  				text-align:left;
  				animation: msgfooting 0.8s ease 0s forwards;
  			}  			
			@keyframes msgfooting
			{
				0%{transform:translateY(0%);}
				100%{transform:translateY(-100%);}
			}

			.msgpop{
				position:fixed;
				text-align:center;
				border-radius:4px;
				word-wrap:break-word;
				padding:20px;
				width:80%;
				max-height:65%;
				overflow-x:hidden;
				overflow-y:auto;
				background-color:#e0bb95;
				color:#000;
				font-size:14px;
				top:50%;
				left:50%;
				transform:translateX(-50%) translateY(-50%) scale(0);
				border:0px;
				text-align:left;
				animation: msgpoping 0.8s ease 0s forwards;
			}  			
			@keyframes msgpoping
			{
				0%{transform:translateX(-50%) translateY(-50%) scale(0);}
				100%{transform:translateX(-50%) translateY(-50%) scale(1);}
			}
			.yximgwrite{
				position:absolute;
				top:0px;
				left:0px;
				width:100vw;
				height:100vw;
			}
			
			.yxinputswrite{
				position:absolute;
				top:calc(100vw + 30px);
				left:0px;
				right:0px;
				bottom:0px;
				background-color:black;
			}
			.yximgread{
				position:absolute;
				top:60px;
				left:0px;
				width:100vw;
				height:100vw;
			}
			
			.yxinputsread{
				position:absolute;
				top:calc(100vw + 65px);
				left:0px;
				right:0px;
				bottom:0px;
				overflow-y:auto;
				overflow-x:hidden;
				word-wrap:break-word;
			}
			.yxinputsreadbg{
				position:absolute;
				top:calc(100vw + 65px);
				left:0px;
				right:0px;
				bottom:0px;
				background-color:black;
				opacity:0.6;
				word-wrap:break-word;
			}
			@media (min-aspect-ratio: 2/3){
				.content{
	  				position:fixed;
	  				display:block;
	  				text-align:center;
	  				overflow:hidden;
	  				top:0px;
	  				width:300px;
	  				bottom:80px;
	  				left:50%;
	  				transform:translateX(-50%);
	  				border:0px;
  				}	
  				.yximgwrite{
					position:absolute;
					top:0px;
					left:0px;
					width:300px;
					height:300px;
				}
				
				.yxinputswrite{
					position:absolute;
					top:330px;
					left:0px;
					right:0px;
					bottom:0px;
					background-color:black;
				}
				.yximgread{
					position:absolute;
					top:60px;
					left:0px;
					width:300px;
					height:300px;
				}
				
				.yxinputsread{
					position:absolute;
					top:365px;
					left:0px;
					right:0px;
					bottom:0px;
					overflow-x:hidden;
					overflow-y:auto;
					word-wrap:break-word;
				}
				.yxinputsreadbg{
					position:absolute;
					top:365px;
					left:0px;
					right:0px;
					bottom:0px;
					background-color:black;
					opacity:0.6;
					word-wrap:break-word;
				}
			}
			
			@media (max-height: 500px){
				.yxinputswrite{
					position:absolute;
					top:0px;
					left:0px;
					right:0px;
					bottom:0px;
					opacity:0.8;
					background-color:black;
				}
				.yxinputsreadbg{
					position:absolute;
					top:0px;
					left:0px;
					right:0px;
					bottom:0px;
					background-color:black;
					opacity:0.4;
					word-wrap:break-word;
				}
				.yxinputsread{
					position:absolute;
					top:0px;
					left:0px;
					right:0px;
					bottom:0px;
					overflow-y:auto;
					overflow-x:hidden;
					word-wrap:break-word;
				}
			}			
			
  			.opening{
  				position:absolute;
  				z-index:20000;
  				background:black;
  				border:0px;
  				width:300px;
  				height:300px;
  				left:50%;
  				top:50%;
  				overflow:hidden;
  				transform:translateX(-50%) translateY(-50%);
  			}
  			.book{
  				position:absolute;
  				border:0px;
  				width:25px;
  				height:2px;
  				left:52px;
  				top:154px;
  			}
  			.thick{
  				position:absolute;
  				border:0px;
  				background-color:#96b6b5;
  				width:25px;
  				height:2px;
  				left:0px;
  				top:0px;
  				animation: thicking 5s linear 0s forwards;
  			}
  			@keyframes thicking
			{
				0%{background-color:#96b6b5;}
				99%{background-color:#96b6b5;}
				100%{background-color:white;}
			}
			.text{
				position:absolute;
				text-align:center;
				font-size:14px;
				width:150px;
				color:#ccc;
				top:50%;
				left:100%;
				animation: texting 3s ease 0s forwards;
  			}
  			@keyframes texting
			{
				0%{transform:translateX(0%) translateY(-50%);}
				100%{transform:translateX(-100%) translateY(-50%);}
			}
			.footer{
				position:absolute;
				text-align:center;
				width:150px;
				font-size:12px;
				color:#ccc;
				top:100%;
				right:0px;
				animation: footering 0.8s linear 4.2s forwards;
  			}
  			@keyframes footering
			{
				0%{transform:translateY(0%) scale(0.5);}
				50%{transform:translateY(-100%) scale(0.5);}
				100%{transform:translateY(-100%) scale(0.5);}
			}
  			.yan{
  				position:absolute;
  				border:0px;
  				color:white;
  				font-size:12px;
  				left:5px;
  				top:75%;
  				transform-origin:center center;
  				transform:rotate(-90deg) scale(0.8) translateX(60%);
  			}
  			.xin{
  				position:absolute;
  				border:0px;
  				color:red;
  				font-size:12px;
  				left:5px;
  				top:25%;
  				transform-origin:center center;
  				transform:rotate(-90deg) scale(0.8) translateX(60%);
  			}
  			.cover{
  				position:absolute;
  				border:0px;
  				background-color:#96b6b5;
  				width:25px;
  				height:20px;
  				bottom:2px;
  				left:0px;
  				transform-origin:bottom center;
  				transform:rotateX(90deg);
  				animation: covering 5s linear 0s forwards;
  			}
  			@keyframes covering
			{
				0%{transform-origin:bottom center;transform:rotateX(90deg);}
				80%{transform-origin:bottom center;transform:rotateX(90deg);}
				85%{transform-origin:bottom center;transform:rotateX(20deg);}
				95%{transform-origin:bottom center;transform:rotateX(-20deg);}
				100%{transform-origin:bottom center;transform:rotateX(-90deg);}
			}
			
			.pen{
  				position:absolute;
  				border:0px;
  				border-radius:2px 2px;
  				background-color:#aaa;
  				width:15px;
  				height:2px;
  				top:155px;
  				left:54px;
  				animation: pening 5s linear 0s forwards;
  			}
  			@keyframes pening
			{
				0%{transform-origin:bottom right;transform:rotate(0deg);}
				90%{transform-origin:bottom right;transform:rotate(0deg);}
				100%{transform-origin:bottom right;transform:rotate(120deg);}
			}
  			
  		 	.humancolor{
  		 		background-color:#e0bb95;
  		 	}
  		 	.tshirtcolor{
  		 		background-color:#f4a57e;
  		 	}
  		 	.pantscolor{
  		 		background-color:#2891d3;
  		 	}
  			.human{
  				position:absolute;
  				border:0px;
  				width:12px;
  				height:100px;
  				left:202px;
  				top:100px;
  				animation: humaning 5s linear 0s forwards;
  			}
  			@keyframes humaning
			{
				0%   {transform: translateX(0px)  translateY(0px);}
				
				10%   {transform: translateX(-20px) translateY(0px);}
				20%   {transform: translateX(-40px) translateY(-3px);}
				30%   {transform: translateX(-60px) translateY(0px);}
				40%   {transform: translateX(-80px) translateY(-3px);}
				50%   {transform: translateX(-100px) translateY(0px);}
				60%   {transform: translateX(-120px) translateY(-3px);}
				65%   {transform: translateX(-116px) translateY(1px);}
				70%   {transform: translateX(-113px) translateY(7px);}
				75%   {transform: translateX(-110px) translateY(20px);}
			
				100%   {transform: translateX(-110px) translateY(20px);}
			}
			.bodyupper{
  				position:absolute;
  				border:0px;
  				width:12px;
  				height:50px;
  				top:0px;
  				animation: bodyuppering 5s linear 0s forwards;
  			}
  			@keyframes bodyuppering
			{
				0%   {transform: translateX(0px) translateY(0px);}
				100%   {transform: translateX(0px) translateY(0px);}
			}
		  	.head{
  				position:absolute;
  				border-radius:12px 12px;
  				border:0px;
  				width:12px;
  				height:12px;
  				left:0px;
  				top:0px;
  				animation: heading 5s linear 0s forwards;
  			}
  			@keyframes heading
			{
				0%   {transform-origin:bottom center;transform: rotate(0deg);}
				
				90%   {transform-origin:bottom center;transform: rotate(0deg);}
				
				100%   {transform-origin:bottom center;transform: rotate(-30deg);}
			}
	
		  	.body{
  				position:absolute;
  				border-radius:8px 8px;
  				border:0px;
  				width:8px;
  				height:41px;
  				left:2px;
  				top:16px;
  				animation: bodying 5s linear 0s forwards;
  			}
  			@keyframes bodying
			{
				0%   {transform: translateX(0px) translateY(0px);}
				60%   {transform: translateX(0px) translateY(0px);}
				
				100%   {transform: translateX(0px) translateY(0px);}
			}

		  	.armleft{
  				position:absolute;
  				border:0px;
  				width:8px;
  				height:34px;
  				left:2px;
  				top:16px;
  				animation: armlefting 5s linear 0s forwards;
  			}
  			@keyframes armlefting
			{
				0%   {transform-origin:top center;transform: rotate(0deg);}
				
				10%   {transform-origin:4px 4px;transform: rotate(20deg);}
				30%   {transform-origin:4px 4px;transform: rotate(-20deg);}
				50%   {transform-origin:4px 4px;transform: rotate(20deg);}
				60%   {transform-origin:4px 4px;transform: rotate(0deg);}
				80%   {transform-origin:4px 4px;transform: rotate(40deg);}
				
				100%   {transform-origin:4px 4px;transform: rotate(40deg);}
			}

		  	.armleftupper{
  				position:absolute;
  				border-radius:8px 8px;
  				border:0px;
  				width:8px;
  				height:23px;
  				top:0px;
  				left:0px;
  				animation: armleftuppering 5s linear 0s forwards;
  			}
  			@keyframes armleftuppering
			{
				0%   {transform-origin:top center;transform: rotate(0deg);}
				
				100%   {transform-origin:top center;transform: rotate(0deg);}
			}

			.armleftlower{
  				position:absolute;
  				border-radius:8px 8px;
  				border:0px;
  				width:8px;
  				height:26px;
  				top:16px;
  				animation: armleftlowering 5s linear 0s forwards;
  			}
  			@keyframes armleftlowering
			{
				0%   {transform-origin:4px 4px;transform: rotate(0deg);}
				
				60%   {transform-origin:4px 4px;transform: rotate(0deg) scaleY(1);}
				65%   {transform-origin:4px 4px;transform: rotate(0deg) scaleY(0.4);}
				70%   {transform-origin:4px 4px;transform: rotate(50deg) scaleY(0.4);}
				80%   {transform-origin:4px 4px;transform: rotate(50deg) scaleY(0.8);}
				
				100%   {transform-origin:4px 4px;transform: rotate(50deg) scaleY(0.8);}
			}
			
			
		  	.armright{
  				position:absolute;
  				border:0px;
  				width:8px;
  				height:34px;
  				left:2px;
  				top:16px;
  				animation: armrighting 5s linear 0s forwards;
  			}
  			@keyframes armrighting
			{
				0%   {transform-origin:top center;transform: rotate(0deg);}
				
				10%   {transform-origin:4px 4px;transform: rotate(-20deg);}
				30%   {transform-origin:4px 4px;transform: rotate(20deg);}
				50%   {transform-origin:4px 4px;transform: rotate(-20deg);}
				60%   {transform-origin:4px 4px;transform: rotate(0deg);}
				80%   {transform-origin:4px 4px;transform: rotate(40deg);}
				100%   {transform-origin:4px 4px;transform: rotate(40deg);}
			}

		  	.armrightupper{
  				position:absolute;
  				border-radius:8px 8px;
  				border:0px;
  				width:8px;
  				height:23px;
  				top:0px;
  				left:0px;
  				animation: armrightuppering 5s linear 0s forwards;
  			}
  			@keyframes armrightuppering
			{
				0%   {transform-origin:top center;transform: rotate(0deg);}
				
				100%   {transform-origin:top center;transform: rotate(0deg);}
			}

			.armrightlower{
  				position:absolute;
  				border-radius:8px 8px;
  				border:0px;
  				width:8px;
  				height:26px;
  				top:16px;
  				animation: armrightlowering 5s linear 0s forwards;
  			}
  			@keyframes armrightlowering
			{
				0%   {transform-origin:4px 4px;transform: rotate(0deg);}
				60%   {transform-origin:4px 4px;transform: rotate(0deg) scaleY(1);}
				65%   {transform-origin:4px 4px;transform: rotate(0deg) scaleY(0.4);}
				70%   {transform-origin:4px 4px;transform: rotate(50deg) scaleY(0.4);}
				80%   {transform-origin:4px 4px;transform: rotate(50deg) scaleY(0.8);}
				
				100%   {transform-origin:4px 4px;transform: rotate(50deg) scaleY(0.8);}
			}
			
			.legleft{
  				position:absolute;
  				border:0px;
  				width:8px;
  				height:50px;
  				left:2px;
  				top:50px;
  				animation: leglefting 5s linear 0s forwards;
  			}

  			@keyframes leglefting
			{
				0%   {transform-origin:4px 4px;transform: rotate(0deg);}
				
				10%   {transform-origin:4px 4px;transform: rotate(-10deg);}
				30%   {transform-origin:4px 4px;transform: rotate(25deg);}
				50%   {transform-origin:4px 4px;transform: rotate(-10deg);}
				60%   {transform-origin:4px 4px;transform: rotate(0deg);}
				75%   {transform-origin:4px 4px;transform: rotate(90deg);}
				
				100%   {transform-origin:4px 4px;transform: rotate(90deg);}
			}
			.legleftupper{
  				position:absolute;
  				border-radius:8px 8px;
  				border:0px;
  				width:8px;
  				height:30px;
  				top:0px;
  				animation: legleftuppering 5s linear 0s forwards;
  			}
  			@keyframes legleftuppering
			{
				0%   {transform: translateX(0px) translateY(0px);}
				
				60%   {transform: translateX(0px) translateY(0px);}
								
				100%   {transform: translateX(0px) translateY(0px);}
			}
			
			.legleftlower{
  				position:absolute;
  				border-radius:8px 8px;
  				border:0px;
  				width:8px;
  				height:35px;
  				top:23px;
  				animation: legleftlowering 5s linear 0s forwards;
  			}
  			@keyframes legleftlowering
			{
				0%   {transform-origin:4px 4px;transform: rotate(0deg);}
				
				10%   {transform-origin:4px 4px;transform: rotate(-20deg);}
				20%   {transform-origin:4px 4px;transform: rotate(-40deg);}
				30%   {transform-origin:4px 4px;transform: rotate(-10deg);}
				40%   {transform-origin:4px 4px;transform: rotate(0deg);}
				50%   {transform-origin:4px 4px;transform: rotate(-20deg);}
				60%   {transform-origin:4px 4px;transform: rotate(0deg);}
				75%   {transform-origin:4px 4px;transform: rotate(-90deg);}
				
				100%   {transform-origin:4px 4px;transform: rotate(-90deg);}
			} 
			
			.legright{
  				position:absolute;
  				border:0px;
  				width:8px;
  				height:50px;
  				left:2px;
  				top:50px;
  				animation: legrighting 5s linear 0s forwards;
  			}

  			@keyframes legrighting
			{
				0%   {transform-origin:4px 4px;transform: rotate(0deg);}
				
				10%   {transform-origin:4px 4px;transform: rotate(25deg);}
				30%   {transform-origin:4px 4px;transform: rotate(-10deg);}
				50%   {transform-origin:4px 4px;transform: rotate(25deg);}
				60%   {transform-origin:4px 4px;transform: rotate(0deg);}
				75%   {transform-origin:4px 4px;transform: rotate(90deg);}
				
				100%   {transform-origin:4px 4px;transform: rotate(90deg);}
			}
			.legrightupper{
  				position:absolute;
  				border-radius:8px 8px;
  				border:0px;
  				width:8px;
  				height:30px;
  				top:0px;
  				animation: legrightuppering 5s linear 0s forwards;
  			}
  			@keyframes legrightuppering
			{
				0%   {transform: translateX(0px) translateY(0px);}
				
				60%   {transform: translateX(0px) translateY(0px);}
								
				100%   {transform: translateX(0px) translateY(0px);}
			}
			
			.legrightlower{
  				position:absolute;
  				border-radius:8px 8px;
  				border:0px;
  				width:8px;
  				height:35px;
  				top:23px;
  				animation: legrightlowering 5s linear 0s forwards;
  			}
  			@keyframes legrightlowering
			{
				0%   {transform-origin:4px 4px;transform: rotate(0deg);}
				
				10%   {transform-origin:4px 4px;transform: rotate(-10deg);}
				20%   {transform-origin:4px 4px;transform: rotate(0deg);}
				30%   {transform-origin:4px 4px;transform: rotate(-20deg);}
				40%   {transform-origin:4px 4px;transform: rotate(-40deg);}
				50%   {transform-origin:4px 4px;transform: rotate(-10deg);}
				60%   {transform-origin:4px 4px;transform: rotate(0deg);}
				75%   {transform-origin:4px 4px;transform: rotate(-90deg);}
				
				100%   {transform-origin:4px 4px;transform: rotate(-90deg);}
			}  		
		</style>
		<script type="text/javascript" src="jquery-3.3.1.min.js"></script>
		<script type="text/javascript">
		//var datainterface = "/";
		var datainterface = "http://localhost:8080/yanxin/";

		function post(context, actionid, paramjson, confirmtext){
			if (confirmtext!=null){
				if (!confirm(confirmtext)){
					initactions();
					return;
				}
			}
			if (localStorage.getItem("yanxinloginkey")!=null){
				paramjson.loginkey = localStorage.getItem("yanxinloginkey");
			}
			
			var ajaxpost = $.ajax({
				url: datainterface+context+"/"+actionid,  
			　　	timeout : 10000, 
			　　	type : 'post',  
			　　	data :paramjson, 
			　　	dataType:'json',
			　　	success:function(result){
			　　		if (result.state=="success"){
						eval("after"+actionid+"(result.data)");
					} else {
						footmsg(result.error);
						if (result.error.indexOf("重新登录")!=-1){
							localStorage.removeItem("yanxinloginkey");
							dologout();
						}
					}
			　　	},
			　　	complete : function(XMLHttpRequest,status){
			　　		initactions();
			　　		loading(false);
					if (status!="success"){
			　　			ajaxpost.abort();
				　　		footmsg("网络异常 ["+status+"],请检查网络连接后刷新页面！");
			　　		}
			　　	}
			});
		}
		
		function load(photo){
			var folderkey = photo.split("/");
			return "/cexpired/download?folder="+folderkey[0]+"&filekey="+folderkey[1]+"&loginkey="+localStorage.getItem("yanxinloginkey");
		}
		
		function upload(){
			
			var paramdata = new FormData($("#dayimgwriteform")[0]);
			
			var ajaxpost = $.ajax({
				url: datainterface+"cexpired/upload?loginkey="+localStorage.getItem("yanxinloginkey"),  
			　　	timeout : 40000, 
			　　	type : 'post',  
			　　	data :paramdata, 
			　　	dataType:'json',
			　　	processData: false,
				contentType: false,
			　　	success:function(result){
			　　		if (result.state=="success"){
						eval("afterupload(result.data)");
					} else {
						footmsg(result.error);
						if (result.error.indexOf("重新登录")!=-1){
							localStorage.removeItem("yanxinloginkey");
							dologout();
						}
					}
				},
			　　	complete : function(XMLHttpRequest,status){
			　　		initactions();
			　　		loading(false);
					if (status!="success"){
			　　			ajaxpost.abort();
				　　		footmsg("网络异常 ["+status+"] 或上传图片过大，请浏览本地小于4M的图片(正方形图片将获得最佳显示效果),大于100K的图片将会被压缩存储，压缩后图片质量有所损失");
			　　		}
			　　	}
			});
		}

		$(document).ready(function(){
			init();
			setTimeout(function(){
				$("#openingclosebtn").click();
			},5000);
		});
		
		function init(){
			initactions();
			if (localStorage.getItem("yanxinloginkey")==null){
				$("#logoutbtn").click();
			} else {
				$("#todaybtn").click();
			}
		}
		
		function dologout(){
			if (localStorage.getItem("yanxinloginkey")!=null){
				loading(true);
				post("creused","logout",{});
			}
			localStorage.removeItem("yanxinloginkey");
			if (localStorage.getItem("yanxinname")!=null){
				$("#loginuser").val(localStorage.getItem("yanxinname"));
			} else {
				$("#loginuser").val("");
			}
			$("#loginpass").val("");
			$("#loginmotto").val("");
			$(".hideallforms").hide();
			$(".hideallbtns").hide();
			$("#loginform").fadeIn(500);
			$("#newuserbtn").show();
		}
		
		function afterlogout(data){
			footmsg("");
		}
		
		function dologin(){
			loading(true);
			post("freego","login",{"name":$("#loginuser").val(),"pass":$("#loginpass").val(),"motto":$("#loginmotto").val()})
		}
		function afterlogin(data){
			localStorage.setItem("yanxinloginkey",data.loginkey);
			$("#extendselfbtn").attr("targetname",data.name);
			localStorage.setItem("yanxinname",data.name);
			$(".hideallforms").hide();
			$(".hideallbtns").hide();
			$("#todaybtn").val(data.today);
			$("#todaybtn").show();
			$("#accountbtn").show();
			$("#calendarbtn").show();
			if (data.isexpired=="t"){
				$("#accountbtn").click();
				footmsg(data.name+" 欢迎回来 你的账号已经过期，请及时延长过期时间，否则账号将被回收");
			} else {
				$("#todaybtn").click();
				if (data.expiretime!=undefined){
					footmsg(data.name+" 欢迎回来 你的账号即将在 "+data.expiretime+" 后过期，请点击账号并及时延长过期时间");
				} else {
					footmsg(data.name+" 欢迎回来");
				}
			}
		}
		
		function showregisterform(){
			$(".hideallforms").hide();
			$(".hideallbtns").hide();
			$("#registerform").fadeIn(500);
			$("#existuserbtn").show();
		}
		
		function doregister(){
			loading(true);
			post("freego","register",{"name":$("#registeruser").val(),"pass":$("#registerpass").val(),"repass":$("#registerrepass").val(),"motto":$("#registermotto").val(),"remotto":$("#registerremotto").val()});
		}
		function afterregister(data){
			localStorage.setItem("yanxinname",$("#registeruser").val());
			$("#registeruser").val("");
			$("#registerpass").val("");
			$("#registerrepass").val("");
			$("#registermotto").val("");
			$("#registerremotto").val("");
			footmsg(data);
			post("freego","agreement",{});
			dologout();
		}
		
		function afteragreement(data){
			var content="<div style='text-align:center;'><b>"+data.title+"</b></div>";
			for (var i=0;i<data.items.length;i++){
				if (i==data.items.length-1){
					content+="<b>"+data.items[i]+"</b>";
				} else {
					content+=data.items[i]+"<br>";
				}
			}
			popmsg(content);
		}
		function afterforgetpass(data){
			popmsg(data);
		}
		function afterbuyhint(data){
			popmsg(data);
		}
		
		function doreadself(){
			loading(true);
			$("#changepass").val("");
			$("#changerepass").val("");
			$("#changemotto").val("");
			$("#changeremotto").val("");
			$(".hideallaccountform").hide();
			$(".hideallotheraccountform").hide();
			post("creused","readself",{});
		}
		function afterreadself(data){
			$(".hideallforms").hide();
			$("#accountform").fadeIn(500);
			$("#selfname").html(data.name);
			$("#todaybtn").val(data.today);
			$("#selfextendbtn").attr("extendname", data.name);
			$("#selfexpiretime").html("过期时间 "+data.timeexpire);
			$("#selfreusetime").html("回收时间 "+data.timereuse);
			if (parseInt(data.daystogive)>0){
				$("#selfdaystogive").html("库存天数 "+data.daystogive);
				$("#daystogivespendform").show();
				$("#selfdaystogive").show();
			}
			
			if (data.extendselfaftertime!=undefined){
				$("#selfextendhint").html("在 "+data.extendselfaftertime+" 后可延长自己的过期时间");
				$("#selfextendhint").show();
			} else {
				if (parseInt(data.daystogive)>0){
					$("#selfextendform").show();
				} else {
					$("#extendbtn").show();
				}
			}
		}
		
		function doreadtoday(){
			loading(true);
			post("cexpired","readtoday",{})
		}
		function afterreadtoday(data){
			$("#todaybtn").val(data.today);
			$("#todaybtn").show();
			$("#accountbtn").show();
			$("#calendarbtn").show();
		}

		function doreadother(){
			loading(true);
			$(".hideallotheraccountform").hide();
			post("cexpired","readother",{"targetname":$("#findother").val()})
		}
		
		function afterreadother(data){
			$("#otherreusetime").html("回收时间 "+data.timereuse);
			$("#otherexpiretime").html("过期时间 "+data.timeexpire);
			$("#otherdaystogive").html("库存天数 "+data.daystogive);
			$("#othergivebtn").attr("givename",data.name);
			$("#otherextendbtn").attr("extendname",data.name);
			$("#othergive").show();
			$("#othergivebtn").show();
			$("#otherextendform").show();
			if (data.extendotheraftertime!=undefined){
				$("#otherextendhint").html("在 "+data.extendotheraftertime+" 后可延长过期时间");
				$("#otherextendhint").show();
			} else {
				$("#otherextend").show();
				$("#otherextendbtn").show();
			}
		}

		function dochangepass(){
			loading(true);
			post("creused","changepass",{"pass":$("#changepass").val(),"repass":$("#changerepass").val()})
		}
		function afterchangepass(data){
			$("#changepass").val("");
			$("#changerepass").val("");
			footmsg("密码修改成功");
		}

		function doextend(){
			loading(true);
			post("creused","extend",{"incre":$("#"+$(this).attr("selforother")+"extend").val(),"targetname":$(this).attr("extendname")})
		}
		function afterextend(data){
			$("#"+data.selforother+"extend").val("");
			$("#selfdaystogivenew").html("库存天数剩余 "+data.daystogive);
			$("#selfdaystogivenew").show();
			$("#"+data.selforother+"expiretimenew").html("过期时间延长为 "+data.timeexpire);
			$("#"+data.selforother+"expiretimenew").show();
			$("#"+data.selforother+"reusetime").html("回收时间 "+data.timereuse);
			if (parseInt(data.daystogive)<=0){
				$("#daystogivespendform").hide();
				$("#selfextendform").hide();
			}
		}

		function dogive(){
			loading(true);
			post("cexpired","give",{"incre":$("#othergive").val(),"targetname":$(this).attr("givename")})
		}
		function aftergive(data){
			$("#othergive").val("");
			$("#otherdaystogivenew").html("库存天数增加为 "+data.otherdaystogive);
			$("#otherdaystogivenew").show();
			$("#selfdaystogivenew").html("库存天数剩余 "+data.daystogive);
			$("#selfdaystogivenew").show();
			if (parseInt(data.daystogive)<=0){
				$("#daystogivespendform").hide();
				$("#selfextendform").hide();
			}
		}

		function dochangemotto(){
			loading(true);
			post("creused","changemotto",{"motto":$("#changemotto").val(),"remotto":$("#changeremotto").val()})
		}
		function afterchangemotto(data){
			$("#changemotto").val("");
			$("#changeremotto").val("");
			footmsg("格言修改成功");
		}

		function initactions(){
			$("input:button").each(function(){
				if ($(this).attr("action")!=undefined){
					$(this).unbind($(this).attr("action"));
					$(this).one($(this).attr("action"),eval("do"+$(this).attr("actionid")));
				}
			});
		}
		function loading(show){
			$(".hideloading").remove();
			if (show){
				$("body").append("<div id='loadingform' class='hideloading' style='position:fixed;display:none;top:0px;left:0px;right:0px;bottom:45px;background-color:black;opacity:0.8;z-index:10000;'>"+
				"<div class='load' style='position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-100%);z-index:10000;'>请稍后......</div>"+
				"</div>");
				$("#loadingform").fadeIn(800);
			}
		}
		function popmsg(content){
			$(".hidemsgpop").remove();
			$("body").append("<div id='msgpopform' class='hidemsgpop' style='position:fixed;display:none;top:0px;left:0px;right:0px;bottom:48px;background-color:black;opacity:0.8'></div>");
			$("#msgpopform").fadeIn(800);
			$("body").append("<div class='msgpop hidemsgpop'>"+content+"</div>");
			$("body").append("<input id='msgpopbtn' onclick=\"$('.hidemsgpop').remove();\" class='hidemsgpop' style='display:none;position:fixed;bottom:52px;left:50%;transform:translateX(-50%);' type='button' value='知道了'/>");
			$("#msgpopbtn").fadeIn(800);
		}
		function footmsg(content){
			$(".msgfoot").remove();
			$("body").append("<div class='msgfoot'>"+content+
				"</div>");
		}
		</script>
	</head>
	<body>
	
		<div class="content">
			<div id="yanxinwriteform" class="hideallforms" style="position:absolute;display:none;top:0px;left:0px;right:0px;bottom:0px;">
				<div class="yximgwrite">
					<img id="dayimgwrite" src="logo.png" style="position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);max-width: 100%;max-height: 100%;"/>
					<form method="POST" enctype="multipart/form-data" id="dayimgwriteform">
						<input id="filebtn" name="photo" accept="/image/*" style="position:absolute;top:100%;left:0px;" type="file"/>
					</form>
				</div>
				<div class="yxinputswrite">
					<div id="daywrite" style="position:absolute;line-height:30px;height:30px;width:80px;top:0px;left:0px;overflow:hidden;"></div>
					<div style="position:absolute;line-height:30px;height:30px;width:calc(100% - 80px);top:0px;left:80px;">
						<input id="weatherwrite" style="width:calc(30% - 8px);" type="text" maxlength="10" placeholder="填写天气"/>
						<input id="locationwrite" style="width:calc(70% - 8px);" type="text" maxlength="20" placeholder="填写地点"/>
					</div>
					<textarea id="contentwrite" style="position:absolute;top:30px;left:0px;height:calc(100% - 31px);width:100%;resize:none;" maxlength="1000" placeholder="填写日记，限1000字"></textarea>
				</div>
			</div>
			<div id="yanxinreadform" class="hideallforms" style="position:absolute;display:none;top:0px;left:0px;right:0px;bottom:0px;overflow:hidden;text-align:left;">
				<div class="yximgread">
					<div id="dayread" style="position:absolute;top:-55px;left:5px;height:15px;line-height:15px;"></div>
					<div id="weatherread" style="position:absolute;top:-40px;left:5px;height:20px;line-height:20px;"></div>
					<div id="locationread"style="position:absolute;top:-20px;left:5px;height:20px;line-height:20px;overflow:hidden;"></div>
					<img id="dayimgread" src="1_2.jpg" style="position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);max-width: 100%;max-height: 100%;"/>
				</div>
				<div class="yxinputsreadbg"></div>
				<div class="yxinputsread">
					<div id="contentread" style="position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding-left:5px;padding-right:5px;">
					</div>
				</div>
			</div>
			<div id="loginform" class="hideallforms" style="position:absolute;display:none;top:0px;left:0px;right:0px;bottom:0px;overflow:hidden;text-align:left;">
				<div style="position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);width:300px;text-align:center;">
					<div style="width:50px;margin:auto;text-align:right;font-size:12px;">®️</div>
					<img src="logo.png" style="width:40px;height:40px;"><br>
					<div style="padding:5px;">登录你的言心日记</div>
					<input id="loginuser" style="margin-top:5px;" size="24" type="text" maxlength="20" placeholder="填写账号"/><br>
					<input id="loginpass" style="margin-top:5px;" size="24" type="password" maxlength="20" placeholder="只填写密码即可登录"/><br>
					<input id="loginmotto" style="margin-top:5px;" size="24" type="text" maxlength="100" placeholder="或只填写格言也可登录"/><br>
					<div style="position:absolute;top:100%;font-size:12px;left:25%;transform:translateX(-50%) translateY(50%);" 
					onclick="post('freego','forgetpass',{})">忘记密码?</div>
					<input actionid="login" action="click" type="button" style="position:absolute;top:100%;left:50%;transform:translateX(-50%) translateY(50%);" value="登录"/>
				</div>
			</div>
			<div id="registerform" class="hideallforms" style="position:absolute;display:none;top:0px;left:0px;right:0px;bottom:0px;overflow:hidden;text-align:left;">
				<div style="position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);width:300px;text-align:center;">
					<div style="width:50px;margin:auto;text-align:right;font-size:12px;">®️</div>
					<img src="logo.png" style="width:40px;height:40px;"><br>
					<div style="padding:5px;">注册你的言心日记</div>
					<input id="registeruser" style="margin-top:5px;" size="24" type="text" maxlength="20" placeholder="填写账号"/><br>
					<input id="registerpass" style="margin-top:5px;margin-right:10px;" size="10" type="password" maxlength="20" placeholder="填写密码"/><input id="registerrepass" style="margin-top:5px;" size="10" type="password" maxlength="20" placeholder="再填一次密码"/><br>
					<input id="registermotto" style="margin-top:5px;margin-right:10px;" size="10" type="text" maxlength="100" placeholder="填写格言"/><input id="registerremotto" style="margin-top:5px;" size="10" type="text" maxlength="100" placeholder="再填一次格言"/><br>
					<div style="position:absolute;top:100%;font-size:12px;left:25%;transform:translateX(-50%) translateY(50%);" onclick="post('freego','agreement',{})">你的言心协议</div>
					<input actionid="register" action="click" type="button" style="position:absolute;top:100%;left:50%;transform:translateX(-50%) translateY(50%);" value="注册"/>
				</div>
			</div>
			<div id="accountform" class="hideallforms" style="position:absolute;display:none;top:0px;left:0px;right:0px;bottom:0px;overflow:hidden;text-align:left;">
				<div style="position:absolute;max-height:100%;top:50%;left:5px;right:5px;transform:translateY(-50%);overflow-x:hidden;overflow-y:auto;">
					<div id="selfname" style="margin:2px;width:100%;text-align:center;"></div>
					<div style="margin:2px;width:100%;text-align:center;"><input id="logoutbtn" actionid="logout" action="click" type="button" value="退出登录"/></div>

					<div style="width:100%;text-align:left;margin:2px;"><font id="selfreusetime"></font> <div onclick="post('freego','agreement',{})" style="margin:2px;float:right;">你的言心协议</div></div>
					<div style="width:100%;text-align:left;margin:2px;"><font id="selfexpiretime"></font> <br> <input id="extendbtn" onclick="post('freego','buyhint',{})" type="button" class="hideallaccountform" style="display:none;margin:2px;" value="延长"/></div>
					
					<div id="selfexpiretimenew" class="hideallaccountform" style="width:100%;text-align:left;margin:2px;display:none;color:#f4a57e;"></div>

					<div id="selfextendhint" class="hideallaccountform" style="width:100%;text-align:left;margin:2px;display:none;color:#f4a57e;"></div>

					<div id="selfdaystogive" class="hideallaccountform" style="display:none;margin:2px;width:100%;"></div>
					<div id="selfdaystogivenew" class="hideallaccountform" style="display:none;margin:2px;width:100%;color:#f4a57e;"></div>
					
					<div id="selfextendform" class="hideallaccountform" style="display:none;margin:2px;width:100%;"><input id="selfextend" style="margin:2px;" size="5" type="text" maxlength="5" placeholder="填写天数"/><input id="selfextendbtn" actionid="extend" action="click" type="button" style="margin:2px;" selforother="self" value="延长自己的过期时间"/></div>

					<div id="daystogivespendform" class="hideallaccountform" style="display:none;padding:5px;margin:5px;text-align:left;border:1px #ccc solid;border-radius:4px;">
						<div style="width:100%;text-align:left;"><input id="findother" style="margin:2px;" size="10" type="text" maxlength="20" placeholder="填写其它账号"/><input id="findotherbtn" actionid="readother" action="click" style="margin:2px;" type="button" value="查询"/></div>
						<div id="otherextendform" class="hideallotheraccountform" style="display:none;width:100%;">
							<div id="otherreusetime" style="margin:2px;width:100%;text-align:left;"></div>
							<div id="otherexpiretime" style="margin:2px;width:100%;text-align:left;"></div>
							<div id="otherexpiretimenew" class="hideallotheraccountform" style="margin:2px;width:100%;text-align:left;display:none;color:#f4a57e;"></div>
							<div id="otherextendhint" class="hideallotheraccountform" style="width:100%;text-align:left;margin:2px;display:none;color:#f4a57e;"></div>
							<div style="width:100%;text-align:left;"><input id="otherextend" class="hideallotheraccountform" style="margin:2px;display:none;" size="5" type="text" maxlength="5" placeholder="填写天数"/><input actionid="extend" action="click" id="otherextendbtn" class="hideallotheraccountform" style="display:none;margin:2px;" selforother="other" type="button" value="延长过期时间"/></div>
							<div id="otherdaystogive" style="margin:2px;width:100%;text-align:left;"></div>
							<div id="otherdaystogivenew" class="hideallotheraccountform" style="margin:2px;width:100%;text-align:left;display:none;color:#f4a57e;"></div>
							<div style="width:100%;text-align:left;"><input id="othergive" class="hideallotheraccountform" style="margin:2px;" size="5" type="text" maxlength="5" placeholder="填写天数"/><input id="othergivebtn" class="hideallotheraccountform" actionid="give" action="click" type="button" style="margin:2px;" value="增加库存天数"/></div>
						</div>
					</div>
					
					<div style="width:100%;"><input id="changepass" style="margin:2px;" size="10" type="password" maxlength="20" placeholder="填写新密码"/><input id="changerepass" style="margin:2px;" size="10" type="password" maxlength="20" placeholder="再填一次新密码"/><input actionid="changepass" action="click" type="button" style="margin:2px;" value="修改"/></div>
					<div style="width:100%;"><input id="changemotto" style="margin:2px;" size="10" type="text" maxlength="100" placeholder="填写新格言"/><input id="changeremotto" style="margin:2px;" size="10" type="text" maxlength="100" placeholder="再填一次新格言"/><input actionid="changemotto" action="click" type="button" style="margin:2px;" value="修改"/></div>
				</div>
			</div>
			<div id="calendarform" class="hideallforms" style="position:absolute;display:none;top:0px;left:0px;right:0px;bottom:0px;overflow:hidden;text-align:left;">

			</div>
		</div>
		
		<div class="footbtns">
			<input id="accountbtn" actionid="readself" action="click" class="hideallbtns" type="button" style="display:none;background-image: url(logo.png);background-size:contain;background-repeat:no-repeat;padding-left:27px;background-color:black;border-radius:unset;" value="账号"/>
			<input id="calendarbtn" class="hideallbtns" type="button" style="display:none;" value="日历"/>
			<input id="todaybtn" actionid="readtoday" action="click" class="hideallbtns" type="button" style="display:none;" value="今天"/>
			<input id="newuserbtn" onclick="showregisterform()" class="hideallbtns" type="button" style="display:none;" value="注册新账号"/>
			<input id="existuserbtn" onclick="dologout()" class="hideallbtns" type="button" style="display:none;background-image: url('logo.png');
    background-repeat: no-repeat;
    background-position: center; background-attachment: fixed;
    " value="已有账号"/>
		</div>
	
		<div class="openingclose" style="position:absolute;top:0px;left:0px;right:0px;bottom:0px;background-color:black;"></div>
		<div class="opening openingclose">
			<input id="openingclosebtn" style="position:absolute;left:25%;bottom:0px;transform:translateX(-50%)" type="button" value="跳过" onclick="$('.openingclose').fadeOut(1000);"/>
			<div style="position:absolute;top:178px;left:87px;">
				<div style="position:absolute;border:0px;border-radius:4px 4px;background-color:white;width:20px;height:4px;"></div>
				<div style="position:absolute;border:0px;background-color:white;width:4px;height:23px;left:2px;top:4px;"></div>
				<div style="position:absolute;border:0px;background-color:white;width:4px;height:23px;left:14px;top:4px;"></div>
			</div>

			<div class="human">
				<div class="head humancolor"></div>
				<div class="armleft">
					<div class="armleftupper tshirtcolor"></div>
					<div class="armleftlower humancolor"></div>
				</div>
				<div class="legleft">
					<div class="legleftupper pantscolor"></div>
					<div class="legleftlower humancolor"></div>
				</div>
				<div class="body tshirtcolor"></div>
				<div class="legright">
					<div class="legrightupper pantscolor"></div>
					<div class="legrightlower humancolor"></div>
				</div>
				<div class="armright">
					<div class="armrightupper tshirtcolor"></div>
					<div class="armrightlower humancolor"></div>
				</div>
			</div>

			<div class="pen"></div>

			<div style="position:absolute;top:156px;left:42px;">
				<div style="position:absolute;border:0px;border-radius:4px 4px;background-color:white;width:40px;height:4px;"></div>
				<div style="position:absolute;border:0px;background-color:white;width:4px;height:45px;left:5px;top:4px;"></div>
				<div style="position:absolute;border:0px;background-color:white;width:4px;height:45px;left:31px;top:4px;"></div>
			</div>
			
			<div class="book">
				<div class="thick"></div>
				<div class="cover">
					<div class="yan">言</div>
					<div class="xin">心</div>
				</div>
			</div>
			
			<div class="text">
				<div style="margin:auto;width:50px;text-align:right;font-size:12px;">®️️</div>
				<img src="logo.png" style="width:40px;height:40px;"><br>
				言心<br>
				你的心灵日记<br>
				陪伴有故事的你<br>
				<br>
				<br>
				© 10o10m科技<br>
				出品
			</div>
			<div class="footer">
				沪ICP备123412341234
			</div>
		</div>
	</body>
</html>	
